# MPC Wallet Docker Environment Configuration
# Copy this file to .env and configure for your environment
# DO NOT commit .env to version control!

# ============================================================================
# PostgreSQL Configuration
# ============================================================================
POSTGRES_USER=mpc
POSTGRES_PASSWORD=CHANGE_ME_STRONG_PASSWORD_HERE
POSTGRES_DB=mpc_wallet

# ============================================================================
# Cluster Configuration
# ============================================================================
# Signing threshold (minimum signatures required)
THRESHOLD=4

# Total number of nodes in the cluster
TOTAL_NODES=5

# ============================================================================
# Bitcoin Network Configuration
# ============================================================================
# Network: mainnet, testnet, signet, regtest
BITCOIN_NETWORK=testnet

# Esplora API URL for blockchain queries
# Testnet: https://blockstream.info/testnet/api
# Mainnet: https://blockstream.info/api
# Custom: http://your-esplora-server:3000
ESPLORA_URL=https://blockstream.info/testnet/api

# ============================================================================
# Certificate Path
# ============================================================================
# Path to directory containing TLS certificates
# Must contain: ca.crt, node1.crt, node1.key, node2.crt, node2.key, etc.
# Use absolute path or path relative to docker-compose.yml
CERTS_PATH=../certs

# ============================================================================
# Logging Configuration
# ============================================================================
# Log level: error, warn, info, debug, trace
# Format: level or module=level (e.g., info,mpc_wallet=debug)
RUST_LOG=info

# ============================================================================
# etcd Configuration (Advanced)
# ============================================================================
# etcd cluster endpoints (internal, no need to change)
ETCD_ENDPOINTS=http://etcd-1:2379,http://etcd-2:2379,http://etcd-3:2379

# etcd cluster token (change for production)
ETCD_CLUSTER_TOKEN=mpc-wallet-cluster

# ============================================================================
# Node-Specific Configuration (Advanced)
# ============================================================================
# These are typically set per-node in docker-compose.yml
# Override here if needed for testing

# NODE_ID=1
# LISTEN_ADDR=0.0.0.0:8080
# QUIC_ADDR=0.0.0.0:9000

# ============================================================================
# Development Settings
# ============================================================================
# Uncomment for development/debugging

# Enable full backtraces
# RUST_BACKTRACE=full

# Verbose logging for development
# RUST_LOG=debug,mpc_wallet=trace

# ============================================================================
# Security Notes
# ============================================================================
# IMPORTANT:
# 1. Change POSTGRES_PASSWORD to a strong, randomly generated password
# 2. Keep .env file secure and never commit it to git
# 3. In production, use secrets management (Docker Swarm secrets, Kubernetes secrets, etc.)
# 4. Rotate passwords and certificates regularly
# 5. Use hardware security modules (HSM) for key material in production
# 6. Enable TLS for etcd in production environments
# 7. Restrict network access using firewalls and security groups
# 8. Monitor all services with proper alerting
# 9. Regular backups of PostgreSQL data
# 10. Implement proper disaster recovery procedures

# ============================================================================
# Production Checklist
# ============================================================================
# [ ] Strong passwords for all services
# [ ] Valid TLS certificates (not self-signed in production)
# [ ] Secure certificate storage
# [ ] etcd authentication enabled
# [ ] PostgreSQL authentication configured
# [ ] Network security groups configured
# [ ] Monitoring and alerting set up
# [ ] Backup strategy implemented
# [ ] Disaster recovery plan documented
# [ ] Security audit completed
# [ ] Compliance requirements met
